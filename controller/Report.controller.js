sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/ColumnListItem","sap/m/Label","sap/m/SearchField","sap/m/Token","sap/ui/model/odata/v2/ODataModel","sap/ui/model/type/String","sap/ui/table/Column","sap/m/Column","sap/m/Text","sap/ui/model/json/JSONModel"],function(e,t,a,i,s,l,n,r,o,d,g,u,c,h){"use strict";return e.extend("zrealignreport.zrealignreport.controller.Report",{onInit:function(){var e=this.getView().byId("idSelectionChange").getSelectedKey();if(e==="BusinessPartnerRB"){this.getView().byId("idSalesOrg").setVisible(true);this.getView().byId("idDisChnl").setVisible(true);this.getView().byId("idDivision").setVisible(true);this.getView().byId("idCreatedOnDate").setVisible(false);this.getView().byId("idSalesOffice").setVisible(true);this.getView().byId("idSalesGrp").setVisible(true);this.getView().byId("idSalesDis").setVisible(true);this.getView().byId("idPersnlNo").setVisible(true);this.getView().byId("idNewPerNo").setVisible(true);this.getView().byId("idValidityDate").setVisible(true);this.getView().byId("idCategory").setVisible(true);var t=this.byId("IdNewPernoInpRel");this._oMultiInput=t;var a=this.byId("idNewSalesOfcInpRel");this._oMultiInputsales=a;var i=this.byId("idNewSalesGroupInpRel");this._oMultiInputsalesGrp=i;var s=this.byId("idNewSalesDistInpRel");this._oMultiInputsalesDis=s}else{this.getView().byId("idSalesOrg").setVisible(true);this.getView().byId("idDisChnl").setVisible(true);this.getView().byId("idDivision").setVisible(true);this.getView().byId("idCreatedOnDate").setVisible(true);this.getView().byId("idSalesOffice").setVisible(true);this.getView().byId("idSalesGrp").setVisible(true);this.getView().byId("idSalesDis").setVisible(true);this.getView().byId("idPersnlNo").setVisible(true);this.getView().byId("idNewPerNo").setVisible(false);this.getView().byId("idValidityDate").setVisible(false);var t=this.byId("IdNewPernoInp");this._oMultiInput=t;var a=this.byId("idNewSalesOfcInp");this._oMultiInputsales=a;var i=this.byId("idNewSalesGroupInp");this._oMultiInputsalesGrp=i;var s=this.byId("idNewSalesDistInp");this._oMultiInputsalesDis=s}var l={NewPersonalNo:"",NewSalesOfc:"",NewSalesGroup:"",NewSalesDist:""};var n=new sap.ui.model.json.JSONModel(l);this.getView().setModel(n,"MassDataModel");this.localModel=new sap.ui.model.json.JSONModel;this.getView().setModel(this.localModel,"localModel");var r=new Date;this.byId("DP6").setMinDate(r);var o=new Date;var d=new h;d.setData({tdate:o});this.getView().setModel(d,"dateModel")},onNavigateDate:function(e){e.getSource().setValue(new Date)},onRouteMatched:function(){const e=this;e.oDataModel=this.getView().getModel();const t=e.oDataModel.bindList("/RealignmentDataSet");t.requestContexts(0,Infinity).then(function(e){const t=[];let a=sap.ui.getCore().getModel("cdd");if(!a){a=new h;sap.ui.getCore().setModel(a,"cdd")}e.forEach(function(e){const a=e.getObject();t.push(a)});a.setProperty("/RealignmentDataSet",t)}.bind(this))},onGoBtnPress:function(){var e=this.getView().byId("idSelectionChange").getSelectedKey();if(e==="BusinessPartnerRB"){this.getView().byId("idRelCategory").setVisible(true);this.getView().byId("idSalesOrder").setVisible(false)}else{this.getView().byId("idRelCategory").setVisible(false);this.getView().byId("idSalesOrder").setVisible(true)}},SelectedFilter:function(){var e=this.getView().byId("idSelectionChange").getSelectedKey();if(e==="BusinessPartnerRB"){this.getView().byId("idSalesOrg").setVisible(true);this.getView().byId("idDisChnl").setVisible(true);this.getView().byId("idDivision").setVisible(true);this.getView().byId("idCreatedOnDate").setVisible(false);this.getView().byId("idSalesOffice").setVisible(true);this.getView().byId("idSalesGrp").setVisible(true);this.getView().byId("idSalesDis").setVisible(true);this.getView().byId("idPersnlNo").setVisible(true);this.getView().byId("idNewPerNo").setVisible(true);this.getView().byId("idValidityDate").setVisible(true)}else{this.getView().byId("idSalesOrg").setVisible(true);this.getView().byId("idDisChnl").setVisible(true);this.getView().byId("idDivision").setVisible(true);this.getView().byId("idCreatedOnDate").setVisible(true);this.getView().byId("idSalesOffice").setVisible(true);this.getView().byId("idSalesGrp").setVisible(true);this.getView().byId("idSalesDis").setVisible(true);this.getView().byId("idPersnlNo").setVisible(true);this.getView().byId("idNewPerNo").setVisible(false);this.getView().byId("idValidityDate").setVisible(false)}},onBeforeRebindTable:function(e){var t=e.getParameter("bindingParams");t.parameters=t.parameters||{};var a=e.getSource();var i=this.byId(a.getSmartFilterId());if(i instanceof sap.ui.comp.smartfilterbar.SmartFilterBar){var s=i.getControlByKey("BusinessPartnerRB");var l=i.getControlByKey("ValidityDate");var n=i.getControlByKey("CreatedOnDate");var r=this.getView().byId("DP6").getValue();var o=this.getView().byId("DP5").getDateValue();var d=this.getView().byId("DP5").getFrom();d=this.getOriginalDateTime(d);var g=this.getView().byId("DP5").getSecondDateValue();if(s instanceof sap.m.ComboBox){var u=s.getSelectedKey();if(u==="BusinessPartnerRB"){t.filters.push(new sap.ui.model.Filter("BusinessPartnerRB","EQ","R"));t.filters.push(new sap.ui.model.Filter("ValidityDate","EQ",r));this.getView().byId("FileUploaderRel").setValue("")}else{t.filters.push(new sap.ui.model.Filter("OpenSalesOrderRB","EQ","O"));t.filters.push(new sap.ui.model.Filter("CreatedOnDate","BT",d,g));this.getView().byId("FileUploader").setValue("")}}}},getOriginalDateTime:function(e){if(e!==undefined&&e!==null&&e!==""){var t=sap.ui.core.format.DateFormat.getDateInstance({path:"fvCreatedOnDateFirst",type:"sap.ui.model.type.DateTime",formatOptions:{UTC:true},pattern:"yyyy-MM-dd"});var a=t.format(new Date(e));return a}return null},getOriginalDateTime2:function(e){if(e!==undefined&&e!==null&&e!==""){var t=sap.ui.core.format.DateFormat.getDateInstance({path:"NewValidToDate",type:"sap.ui.model.type.DateTime",formatOptions:{UTC:true},pattern:"MM-dd-yyyy"});var a=t.format(new Date(e));a=new Date(a);return a}return null},fnSaveDeep:function(e){var t=this;var a,i;var s=this.getView().byId("idSelectionChange").getSelectedKey();if(s==="BusinessPartnerRB"){i=this.getView().byId("idRelCategory").getTable().getRows();a=this.getView().byId("idRelCategory").getTable().getSelectedIndices();if(a.length==-1||a.length==0){sap.m.MessageBox.warning("Select at least one record");return}}else{i=this.getView().byId("idSalesOrder").getTable().getRows();a=this.getView().byId("idSalesOrder").getTable().getSelectedIndices();var l=this.getView().byId("FileUploader").getValue()}if(l!==""){if(a.length>0){sap.m.MessageBox.warning("Please select either file or table record");return}var n={OpenSalesOrderRB:"",BusinessPartnerRB:"",RealignmentDataToStatusMsg:[]};if(s==="BusinessPartnerRB"){n.BusinessPartnerRB="R"}else{n.OpenSalesOrderRB="O"}var r={Data:[]};var a=this.getView().getModel("localModel").getData().items;for(var o=0;o<a.length;o++){var d=a[o];n.RealignmentDataToStatusMsg.push({DistributionChannel:d["Distribution Channel"],Division:d.Division,ExistPersonalNo:d["Exist Personal No"],ExstSalesGroup:d["Exst Sales Group"],ExstSalesOfc:d["Exst Sales Ofc"],ExstSalesDist:d["Exst Sales Dist"],NewPersonalNo:d.NewPersonalNo,NewSalesOfc:d.NewSalesOfc,NewSalesGroup:d.NewSalesGroup,NewSalesDist:d.NewSalesDist,PartnerFunction:d["Partner Function"],SalesDocNo:d["Sales Doc No"],SalesOrganization:d["Sales Organization"],Status:""})}var g=this.getView().getModel();g.create("/RealignmentDataSet",n,{success:function(e,a){r.Data=e.RealignmentDataToStatusMsg.results;var i=new sap.ui.model.json.JSONModel(r);t.getView().setModel(i,"Success");t.getOwnerComponent().getRouter().navTo("Sucess");t.getView().byId("FileUploader").setValue("")},error:function(e){},async:true,urlParameters:{}})}else if(a.length>0){if(l!==""){sap.m.MessageBox.warning("Please select either file or table record");return}var n={OpenSalesOrderRB:"",BusinessPartnerRB:"",RealignmentDataToStatusMsg:[]};if(s==="BusinessPartnerRB"){n.BusinessPartnerRB="R"}else{n.OpenSalesOrderRB="O"}var r={Data:[]};for(var o=0;o<a.length;o++){var d=this.getView().byId("idSalesOrder").getTable().getContextByIndex(a[o]).getObject();n.RealignmentDataToStatusMsg.push({SalesDocNo:d.SalesDocNo,SalesOrganization:d.SalesOrganization,BPNumber:d.BPNumber,NewPersonalNo:d.NewPersonalNo,NewSalesOfc:d.NewSalesOfc,NewSalesGroup:d.NewSalesGroup,NewSalesDist:d.NewSalesDist,DistributionChannel:d.DistributionChannel,Category:d.Category,Division:d.Division,ExistPersonalNo:d.ExistPersonalNo,ExstSalesDist:d.ExstSalesDist,ExstSalesGroup:d.ExstSalesGroup,ExstSalesOfc:d.ExstSalesOfc,PartnerFunction:d.PartnerFunction})}var g=this.getView().getModel();g.create("/RealignmentDataSet",n,{success:function(e,i){r.Data=e.RealignmentDataToStatusMsg.results;var s=new sap.ui.model.json.JSONModel(r);t.getView().setModel(s,"Success");t.getOwnerComponent().getRouter().navTo("Sucess");var l=t.getView().byId("idSalesOrder").getTable();a=t.getView().byId("idSalesOrder").getTable().getSelectedIndices();t.getView().byId("idSalesOrder").rebindTable()},error:function(e){},async:true,urlParameters:{}})}else{if(a.length==-1||a.length==0){sap.m.MessageBox.warning("Select at least one record");return}}},fnSaveDeepRel:function(e){var t=this;var a,i;var s=this.getView().byId("idSelectionChange").getSelectedKey();if(s==="BusinessPartnerRB"){i=this.getView().byId("idRelCategory").getTable().getRows();a=this.getView().byId("idRelCategory").getTable().getSelectedIndices();var l=this.getView().byId("FileUploaderRel").getValue()}else{i=this.getView().byId("idSalesOrder").getTable().getRows();a=this.getView().byId("idSalesOrder").getTable().getSelectedIndices();var l=this.getView().byId("FileUploader").getValue()}if(l!==""){if(a.length>0){sap.m.MessageBox.warning("Please select either file or table record");return}var n={OpenSalesOrderRB:"",BusinessPartnerRB:"",RealignmentDataToStatusMsg:[]};if(s==="BusinessPartnerRB"){n.BusinessPartnerRB="R"}else{n.OpenSalesOrderRB="O"}var r={Data:[]};var a=this.getView().getModel("localModel").getData().items;for(var o=0;o<a.length;o++){var d=a[o];var g=d.NewValidToDate;var u=new Date(g);u.setDate(u.getDate()+1);var c=d["Valid On Date"];var h=new Date(c);h.setDate(h.getDate()+1);n.RealignmentDataToStatusMsg.push({BPNumber:d["BP Number"],Category:d.Category,DistributionChannel:d["Distribution Channel"],Division:d.Division,ExistPersonalNo:d["Exist Personal No"],ExstSalesGroup:d["Exst Sales Group"],ExstSalesOfc:d["Exst Sales Ofc"],ExstSalesDist:d["Exst Sales Dist"],NewPersonalNo:d.NewPersonalNo,NewSalesOfc:d.NewSalesOfc,NewSalesGroup:d.NewSalesGroup,NewSalesDist:d.NewSalesDist,NewValidToDate:u,PartnerFunction:d["Partner Function"],SalesDocNo:d["Sales Doc No"],SalesOrganization:d["Sales Organization"],BPNumber:d["BP Numbe"],Status:"",ValidityDate:h})}var p=this.getView().getModel();p.create("/RealignmentDataSet",n,{success:function(e,a){r.Data=e.RealignmentDataToStatusMsg.results;var i=new sap.ui.model.json.JSONModel(r);t.getView().setModel(i,"Success");t.getOwnerComponent().getRouter().navTo("Sucess");t.getView().byId("FileUploaderRel").setValue("")},error:function(e){},async:true,urlParameters:{}})}else if(a.length>0){if(l!==""){sap.m.MessageBox.warning("Please select either file or table record");return}var n={OpenSalesOrderRB:"",BusinessPartnerRB:"",RealignmentDataToStatusMsg:[]};if(s==="BusinessPartnerRB"){n.BusinessPartnerRB="R"}else{n.OpenSalesOrderRB="O"}var r={Data:[]};for(var o=0;o<a.length;o++){var d=this.getView().byId("idRelCategory").getTable().getContextByIndex(a[o]).getObject();var g=d.NewValidToDate;var u=new Date(g);n.RealignmentDataToStatusMsg.push({SalesDocNo:d.SalesDocNo,SalesOrganization:d.SalesOrganization,BPNumber:d.BPNumber,NewPersonalNo:d.NewPersonalNo,NewSalesOfc:d.NewSalesOfc,NewSalesGroup:d.NewSalesGroup,NewSalesDist:d.NewSalesDist,DistributionChannel:d.DistributionChannel,Category:d.Category,Division:d.Division,ExistPersonalNo:d.ExistPersonalNo,ExstSalesDist:d.ExstSalesDist,ExstSalesGroup:d.ExstSalesGroup,ExstSalesOfc:d.ExstSalesOfc,PartnerFunction:d.PartnerFunction,ValidityDate:d.ValidityDate,NewValidToDate:u,Status:""})}var p=this.getView().getModel();p.create("/RealignmentDataSet",n,{success:function(e,i){r.Data=e.RealignmentDataToStatusMsg.results;var s=new sap.ui.model.json.JSONModel(r);t.getView().setModel(s,"Success");t.getOwnerComponent().getRouter().navTo("Sucess");var l=t.getView().byId("idRelCategory").getTable();a=t.getView().byId("idRelCategory").getTable().getSelectedIndices();t.getView().byId("idRelCategory").rebindTable()},error:function(e){},async:true,urlParameters:{}})}else{if(a.length==-1||a.length==0){sap.m.MessageBox.warning("Select at least one record");return}}},onMassSave:function(e){if(!this.byId("_IdDialogManual")){t.load({id:this.getView().getId(),name:"zrealignreport.zrealignreport.fragment.MassSave",controller:this}).then(function(e){this.getView().addDependent(e);this.oManualDialog=e;var t=this.getView().byId("idSalesOrder").getTable().getSelectedIndices();if(t.length==-1||t.length==0){sap.m.MessageBox.warning("Select at least one record");return}this.getView().byId("idNewPersonalNo").setValue("");this.getView().byId("idNewSalesOfc").setValue("");this.getView().byId("idNewSalesGroup").setValue("");this.getView().byId("idNewSalesDist").setValue("");e.open()}.bind(this))}else{var a=this.getView().byId("idSalesOrder").getTable().getSelectedIndices();if(a.length==-1||a.length==0){sap.m.MessageBox.warning("Select at least one record");return}this.getView().byId("idNewPersonalNo").setValue("");this.getView().byId("idNewSalesOfc").setValue("");this.getView().byId("idNewSalesGroup").setValue("");this.getView().byId("idNewSalesDist").setValue("");this.oManualDialog.open()}},onMassSaveRel:function(e){if(!this.byId("_IdDialogManual")){t.load({id:this.getView().getId(),name:"zrealignreport.zrealignreport.fragment.MassSave",controller:this}).then(function(e){this.getView().addDependent(e);this.oManualDialog=e;var t=this.getView().byId("idRelCategory").getTable().getSelectedIndices();if(t.length==-1||t.length==0){sap.m.MessageBox.warning("Select at least one record");return}this.getView().byId("idNewPersonalNo").setValue("");this.getView().byId("idNewSalesOfc").setValue("");this.getView().byId("idNewSalesGroup").setValue("");this.getView().byId("idNewSalesDist").setValue("");e.open()}.bind(this))}else{var a=this.getView().byId("idRelCategory").getTable().getSelectedIndices();if(a.length==-1||a.length==0){sap.m.MessageBox.warning("Select at least one record");return}this.getView().byId("idNewPersonalNo").setValue("");this.getView().byId("idNewSalesOfc").setValue("");this.getView().byId("idNewSalesGroup").setValue("");this.getView().byId("idNewSalesDist").setValue("");this.oManualDialog.open()}},onDialogManualClose:function(){this.oManualDialog.close()},onDialogManualUpdate:function(e){var t=this;var a,i;var s=this.getView().getModel("MassDataModel").getData();var l=this.getView().byId("idSelectionChange").getSelectedKey();if(l==="BusinessPartnerRB"){i=this.getView().byId("idRelCategory").getTable().getRows();var n=this.getView().byId("idRelCategory").getTable();a=this.getView().byId("idRelCategory").getTable().getSelectedIndices();for(var r=0;r<a.length;r++){n.getRows()[a[r]].getCells().forEach((e,t)=>{try{var a=e.sId.split("Report--")[1].split("-")[0]}catch(e){}if(a){if(a==="IdNewPernoInpRel"){e.setValue(s.NewPersonalNo)}if(a==="idNewSalesOfcInpRel"){e.setValue(s.NewSalesOfc)}if(a==="idNewSalesGroupInpRel"){e.setValue(s.NewSalesGroup)}if(a==="idNewSalesDistInpRel"){e.setValue(s.NewSalesDist)}}})}}else{var n=this.getView().byId("idSalesOrder").getTable();a=this.getView().byId("idSalesOrder").getTable().getSelectedIndices();for(var r=0;r<a.length;r++){n.getRows()[a[r]].getCells().forEach((e,t)=>{try{var a=e.sId.split("Report--")[1].split("-")[0]}catch(e){}if(a){if(a==="IdNewPernoInp"){e.setValue(s.NewPersonalNo)}if(a==="idNewSalesOfcInp"){e.setValue(s.NewSalesOfc)}if(a==="idNewSalesGroupInp"){e.setValue(s.NewSalesGroup)}if(a==="idNewSalesDistInp"){e.setValue(s.NewSalesDist)}}})}}this.oManualDialog.close()},handleFileChange:function(e){this._import(e.getParameter("files")&&e.getParameter("files")[0]);if(!this.byId("_IdDialogManualUpload")){t.load({id:this.getView().getId(),name:"zrealignreport.zrealignreport.fragment.UploadFile",controller:this}).then(function(e){this.getView().addDependent(e);this.oManualDialog=e;e.open()}.bind(this))}else{this.oManualDialog.open()}},onDialogUploadClose:function(){this.oManualDialog.close();sap.m.MessageBox.information("Please Click on Save")},handleFileChange2:function(e){this._import(e.getParameter("files")&&e.getParameter("files")[0]);if(!this.byId("_IdDialogManualUpload2")){t.load({id:this.getView().getId(),name:"zrealignreport.zrealignreport.fragment.UploadFile2",controller:this}).then(function(e){this.getView().addDependent(e);this.oManualDialog1=e;e.open()}.bind(this))}else{this.oManualDialog1.open()}},onDialogUploadClose2:function(){this.oManualDialog1.close();sap.m.MessageBox.information("Please Click on Save")},_import:function(e){var t=this;var a={};if(e&&window.FileReader){var i=new FileReader;i.onload=function(e){var a=e.target.result;var i=XLSX.read(a,{type:"binary",cellDates:true,dateNF:"mm/dd/yyyy"});var s=XLSX.utils.sheet_to_json(i.Sheets[i.SheetNames[0]],{range:0});console.log(s);t.localModel.setData({items:s});t.localModel.refresh(true)};i.onerror=function(e){console.log(e)};i.readAsBinaryString(e)}},onValueHelpRequest:function(e){this._oInput=e.getSource();var s=e.getSource().getValue(),l=this.getView();if(!this._pValueHelpDialog){this._pValueHelpDialog=t.load({id:l.getId(),name:"zrealignreport.zrealignreport.fragment.ValueHelpDialogPerNo",controller:this}).then(function(e){l.addDependent(e);return e})}this._pValueHelpDialog.then(function(e){e.getBinding("items").filter([new a("PERSONNELNUMBER",i.Contains,s)]);e.open(s)})},onValueHelpClose:function(e){var t=e.getParameter("selectedItem").getBindingContext().getObject();e.getSource().getBinding("items").filter([]);if(!t){return}this._oInput.setValue(t.PERSONNELNUMBER)},onValueHelpRequested2:function(e){this._oMultiInput=e.getSource();this._oBasicSearchField=new n;var a=this;var i=this.getView();t.load({name:"zrealignreport.zrealignreport.fragment.ValueHelpDialogPerNo",controller:this}).then(function e(t){a._oVHD=t;a.getView().addDependent(a._oVHD);a._oVHD.getFilterBar().setBasicSearch(a._oBasicSearchField);a._oVHD.setEscapeHandler(function(e){});a._oBasicSearchField.attachSearch(function(){a._oVHD.getFilterBar().search()});a._oVHD.getTableAsync().then(function(e){var t=a.getOwnerComponent().getModel();e.setModel(t);if(e.bindRows){e.bindAggregation("rows",{path:"/PersonalNoVHSet",events:{dataReceived:function(){a._oVHD.update()}}});e.addColumn(new g({label:"Personal Number",template:"PERSONNELNUMBER"}));e.addColumn(new g({label:"Employee's Name",template:"DFSOBJECTSHORTNAME"}));e.addColumn(new g({label:"Formatted Name of Employee or Applicant",template:"EMPLOYEENAME"}))}a._oVHD.update()}.bind(a));a._oVHD.open()}.bind(a))},onValueHelpOkPress:function(e){var t=e.getParameter("tokens")[0].mProperties.key;this._oMultiInput.setValue(t);this._oVHD.close()},onValueHelpCancelPress:function(){this._oVHD.destroy()},onFilterBarSearchPer:function(e){var t=this._oBasicSearchField.getValue(),s=e.getParameter("selectionSet");var l=s.reduce(function(e,t){if(t.getValue()){e.push(new a({path:t.getName(),operator:i.Contains,value1:t.getValue()}))}return e},[]);l.push(new a({filters:[new a({path:"PERSONNELNUMBER",operator:i.Contains,value1:t}),new a({path:"DFSOBJECTSHORTNAME",operator:i.Contains,value1:t}),new a({path:"EMPLOYEENAME",operator:i.Contains,value1:t})],and:false}));this._filterTable(new a({filters:l,and:true}))},_filterTable:function(e){var t=this._oVHD;t.getTableAsync().then(function(a){if(a.bindRows){a.getBinding("rows").filter(e)}if(a.bindItems){a.getBinding("items").filter(e)}t.update()})},onValueHelpRequestedSalesOfc:function(e){this._oMultiInputsales=e.getSource();this._oBasicSearchFieldSalesOffc=new n;var a=this;var i=this.getView();t.load({name:"zrealignreport.zrealignreport.fragment.ValueHelpDialogSalesOfc",controller:this}).then(function e(t){a._oVHDSalesOfc=t;a.getView().addDependent(a._oVHDSalesOfc);a._oVHDSalesOfc.getFilterBar().setBasicSearch(a._oBasicSearchFieldSalesOffc);a._oVHDSalesOfc.setEscapeHandler(function(e){});a._oBasicSearchFieldSalesOffc.attachSearch(function(){a._oVHDSalesOfc.getFilterBar().search()});a._oVHDSalesOfc.getTableAsync().then(function(e){var t=a.getOwnerComponent().getModel();e.setModel(t);if(e.bindRows){e.bindAggregation("rows",{path:"/SalesOfcVHSet",events:{dataReceived:function(){a._oVHDSalesOfc.update()}}});e.addColumn(new g({label:"Sales Office",template:"VKBUR"}));e.addColumn(new g({label:"Description",template:"BEZEI"}))}a._oVHDSalesOfc.update()}.bind(a));a._oVHDSalesOfc.open()}.bind(a))},onValueHelpSalesOfcOkPress:function(e){var t=e.getParameter("tokens")[0].mProperties.key;this._oMultiInputsales.setValue(t);this._oVHDSalesOfc.close()},onValueHelpSalesOfcCancelPress:function(){this._oVHDSalesOfc.destroy()},onFilterBarSearchSalesOfc:function(e){var t=this._oBasicSearchFieldSalesOffc.getValue(),s=e.getParameter("selectionSet");var l=s.reduce(function(e,t){if(t.getValue()){e.push(new a({path:t.getName(),operator:i.Contains,value1:t.getValue()}))}return e},[]);l.push(new a({filters:[new a({path:"VKBUR",operator:i.Contains,value1:t}),new a({path:"BEZEI",operator:i.Contains,value1:t})],and:false}));this._filterTableSalesOfc(new a({filters:l,and:true}))},_filterTableSalesOfc:function(e){var t=this._oVHDSalesOfc;t.getTableAsync().then(function(a){if(a.bindRows){a.getBinding("rows").filter(e)}if(a.bindItems){a.getBinding("items").filter(e)}t.update()})},onValueHelpRequestedSalesGrp:function(e){this._oMultiInputsalesGrp=e.getSource();this._oBasicSearchField=new n;var a=this;var i=this.getView();t.load({name:"zrealignreport.zrealignreport.fragment.ValueHelpDialogSalesGrp",controller:this}).then(function e(t){a._oVHD=t;a.getView().addDependent(a._oVHD);a._oVHD.getFilterBar().setBasicSearch(a._oBasicSearchField);a._oVHD.setEscapeHandler(function(e){});a._oBasicSearchField.attachSearch(function(){a._oVHD.getFilterBar().search()});a._oVHD.getTableAsync().then(function(e){var t=a.getOwnerComponent().getModel();e.setModel(t);if(e.bindRows){e.bindAggregation("rows",{path:"/SalesGrpVHSet",events:{dataReceived:function(){a._oVHD.update()}}});e.addColumn(new g({label:"Sales Group",template:"VKGRP"}));e.addColumn(new g({label:"Description",template:"BEZEI"}))}a._oVHD.update()}.bind(a));a._oVHD.open()}.bind(a))},onValueHelpSalesGrpOkPress:function(e){var t=e.getParameter("tokens")[0].mProperties.key;this._oMultiInputsalesGrp.setValue(t);this._oVHD.close()},onValueHelpSalesGrpCancelPress:function(){this._oVHD.destroy()},onFilterBarSearchSalesGrp:function(e){var t=this._oBasicSearchField.getValue(),s=e.getParameter("selectionSet");var l=s.reduce(function(e,t){if(t.getValue()){e.push(new a({path:t.getName(),operator:i.Contains,value1:t.getValue()}))}return e},[]);l.push(new a({filters:[new a({path:"VKGRP",operator:i.Contains,value1:t}),new a({path:"BEZEI",operator:i.Contains,value1:t})],and:false}));this._filterTableGrp(new a({filters:l,and:true}))},_filterTableGrp:function(e){var t=this._oVHD;t.getTableAsync().then(function(a){if(a.bindRows){a.getBinding("rows").filter(e)}if(a.bindItems){a.getBinding("items").filter(e)}t.update()})},onValueHelpRequestedSalesDis:function(e){this._oMultiInputsalesDis=e.getSource();this._oBasicSearchField=new n;var a=this;var i=this.getView();t.load({name:"zrealignreport.zrealignreport.fragment.ValueHelpDialogSalesDis",controller:this}).then(function e(t){a._oVHD=t;a.getView().addDependent(a._oVHD);a._oVHD.getFilterBar().setBasicSearch(a._oBasicSearchField);a._oVHD.setEscapeHandler(function(e){});a._oBasicSearchField.attachSearch(function(){a._oVHD.getFilterBar().search()});a._oVHD.getTableAsync().then(function(e){var t=a.getOwnerComponent().getModel();e.setModel(t);if(e.bindRows){e.bindAggregation("rows",{path:"/SalesDistVHSet",events:{dataReceived:function(){a._oVHD.update()}}});e.addColumn(new g({label:"Sales District",template:"BZIRK"}));e.addColumn(new g({label:"District Name",template:"BZTXT"}))}a._oVHD.update()}.bind(a));a._oVHD.open()}.bind(a))},onValueHelpSalesDisOkPress:function(e){var t=e.getParameter("tokens")[0].mProperties.key;this._oMultiInputsalesDis.setValue(t);this._oVHD.close()},onValueHelpSalesDisCancelPress:function(){this._oVHD.destroy()},onFilterBarSearchSalesDist:function(e){var t=this._oBasicSearchField.getValue(),s=e.getParameter("selectionSet");var l=s.reduce(function(e,t){if(t.getValue()){e.push(new a({path:t.getName(),operator:i.Contains,value1:t.getValue()}))}return e},[]);l.push(new a({filters:[new a({path:"BZIRK",operator:i.Contains,value1:t}),new a({path:"BZTXT",operator:i.Contains,value1:t})],and:false}));this._filterTableDist(new a({filters:l,and:true}))},_filterTableDist:function(e){var t=this._oVHD;t.getTableAsync().then(function(a){if(a.bindRows){a.getBinding("rows").filter(e)}if(a.bindItems){a.getBinding("items").filter(e)}t.update()})},handleChange:function(e){if(e!==undefined&&e!==null&&e!==""){var t=sap.ui.core.format.DateFormat.getDateInstance({path:"NewValidToDate",type:"sap.ui.model.type.Date",formatOptions:{UTC:true},strictParsing:true,pattern:"yyyy/MM/dd"});var a=t.format(new Date(e));return a}return null}})});